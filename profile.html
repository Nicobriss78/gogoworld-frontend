<!-- profile.html ‚Äî C1 Profilo utente (UI minima) -->
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profilo ‚Ä¢ GoGoWorld.life</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="/css/areas/participant.css" />
</head>
<body>
  <div class="gw-app">
    <div class="gw-page">

      <!-- =========================
           TOPBAR (UI v2)
           ========================= -->
      <header class="gw-topbar">
        <div class="gw-topbar-row gw-topbar-row--title">
          <div class="gw-greeting">
            <div class="gw-hello">Ciao <span id="gwUserName">üë§</span></div>
            <div class="gw-status">Partecipante</div>
          </div>

          <div class="gw-brand">
            <span class="gw-brandtext">GoGoWorld.life</span>
          </div>
        </div>

        <div class="gw-topbar-row gw-topbar-row--actions">
          <a class="gw-iconbtn" href="pages/cerca-utenti.html" title="Cerca">
            <span class="gw-ico">üîé</span>
          </a>

          <button class="gw-iconbtn" id="btnGeo" title="Posizione">
            <span class="gw-ico">üìç</span>
          </button>

          <a class="gw-iconbtn" href="messages.html" title="Messaggi">
            <span class="gw-ico">‚úâÔ∏è</span>
            <span id="messagesBadge" class="gw-badge is-hidden">0</span>
          </a>

          <button class="gw-iconbtn" id="btnNotifications" title="Notifiche">
            <span class="gw-ico">üîî</span>
            <span id="notiBadge" class="gw-badge is-hidden">0</span>
          </button>

          <button class="gw-iconbtn" id="btnHamburger" title="Menu">
            <span class="gw-ico">‚â°</span>
          </button>
        </div>

        <div id="gwMenu" class="gw-menu is-hidden">
          <a href="pages/cerca-utenti.html">Cerca utente</a>
          <a href="#" id="btnPrivateEvents">Eventi privati</a>
          <a href="#" id="btnGuide">Guida partecipante</a>
          <a href="#" id="btnSwitchRole">Cambia ruolo</a>
          <a href="#" id="btnLogout" class="danger">Logout</a>
        </div>
      </header>

      <!-- =========================
           MAIN
           ========================= -->
      <main class="gw-home">

        <section class="gw-block">
          <div class="gw-block-head">
            <h2 class="gw-block-title">Profilo</h2>
          </div>

          <div class="gw-block-body">

            <!-- Alerts -->
            <div id="alerts"></div>

            <!-- =========================
                 VIEW MODE
                 ========================= -->
              <section id="profileView">

              <!-- Avatar -->
              <div class="form-row">
                <div class="avatar-box">
                 <img id="avatarView" alt="Avatar profilo" class="gw-avatar gw-avatar--120 is-hidden"/>

                </div>
              </div>

              <!-- Informazioni pubbliche -->
               <div class="form-row u-mt-05">
                <p class="muted">Informazioni pubbliche</p>
                  <div class="u-flex-col u-gap-025">
                  <div><strong id="viewNickname">‚Äî</strong></div>
                  <div class="muted" id="viewPlace" style="display:none;"></div>
                  <div class="muted" id="viewBio" style="display:none;"></div>
                  <div class="muted" id="viewLanguages" style="display:none;"></div>
                  <div class="muted" id="viewInterests" style="display:none;"></div>
                  <div class="muted" id="viewSocials" style="display:none;"></div>
                </div>
              </div>
              <!-- Verifica email -->
              <div class="form-row" id="verifyBox" style="margin-top:.75rem; display:none;">
                <p class="muted">Verifica email</p>

                <div style="border:1px solid #ddd; border-radius:12px; padding:.75rem;">
                  <div id="verifyStatus" class="muted">‚Äî</div>

                  <button id="btnResendVerify" class="btn" style="margin-top:.5rem; width:100%; display:none;">
                    Reinvia email di verifica
                  </button>
                </div>
              </div>
              <!-- Livello L2 -->
              <div class="form-row" id="l2Box" style="margin-top:.75rem; display:none;">
               <p class="muted">Livello L2</p>

                <div style="border:1px solid #ddd; border-radius:12px; padding:.75rem;">
                 <div id="l2Status" class="muted">‚Äî</div>
                  <div id="l2Missing" class="muted" style="margin-top:.35rem; display:none;"></div>

                  <button id="btnGoCompleteProfile" class="btn btn-secondary"
                   style="margin-top:.5rem; width:100%; display:none;">
                   Completa il profilo
                  </button>
                 </div>
                </div>

              <!-- Bacheca -->
              <div class="form-row" style="margin-top:.75rem;">
                <p class="muted">Bacheca</p>
                <a id="btnMyPublic2" class="btn" href="#">Vedi la mia bacheca pubblica</a>
              </div>

              <!-- Connessioni -->
              <div class="form-row" style="margin-top:.75rem;">
                <p class="muted">Connessioni</p>

                <div class="profile-stats" style="display:flex;gap:1rem;flex-wrap:wrap;">
                  <span><strong id="myFollowersCount_view">0</strong> follower</span>
                  <span><strong id="myFollowingCount_view">0</strong> seguiti</span>
                </div>

                <div class="form-actions" style="margin-top:.5rem;display:flex;gap:.5rem;flex-wrap:wrap;">
                  <button type="button" class="btn btn-secondary" id="btnShowFollowers_view">
                    Vedi chi ti segue
                  </button>
                  <button type="button" class="btn btn-secondary" id="btnShowFollowing_view">
                    Vedi chi segui
                  </button>
                </div>

                <div id="followersBox_view" class="muted" style="margin-top:.5rem;display:none;">
                  <strong>Follower</strong>
                  <ul id="followersList_view" class="simple-list"></ul>
                  <p id="followersEmpty_view" class="muted" style="display:none;">
                    Nessuno ti segue ancora.
                  </p>
                </div>

                <div id="followingBox_view" class="muted" style="margin-top:.5rem;display:none;">
                  <strong>Seguiti</strong>
                  <ul id="followingList_view" class="simple-list"></ul>
                  <p id="followingEmpty_view" class="muted" style="display:none;">
                    Non stai ancora seguendo nessuno.
                  </p>
                </div>
              </div>

              <!-- Azione -->
              <div class="form-actions" style="margin-top:.75rem;">
                <button type="button" class="btn" id="btnEditProfile">Modifica</button>
              </div>
            </section>

            <!-- =========================
                 EDIT MODE
                 ========================= -->
              <section id="profileEdit" class="is-hidden">

              <!-- CARD: Dati di base -->
              <section class="event-card" id="card-basic">
                <h3>Dati di base</h3>

                <form id="basicForm" class="form">
                  <div class="grid-2">
                    <div class="form-row">
                      <label for="nickname">Nickname</label>
                      <input id="nickname" name="nickname" type="text" maxlength="40"/>
                    </div>

                    <div class="form-row">
                      <label for="birthYear">Anno di nascita</label>
                      <input id="birthYear" name="birthYear" type="number"/>
                    </div>

                    <div class="form-row">
                      <label for="region">Regione</label>
                      <input id="region" name="region" type="text"/>
                    </div>

                    <div class="form-row">
                      <label for="city">Citt√†</label>
                      <input id="city" name="city" type="text"/>
                    </div>

                    <input id="avatarUrl" name="avatarUrl" type="hidden"/>

                    <div class="form-row">
                      <label for="avatarFile">Avatar</label>
                      <input id="avatarFile" name="avatarFile" type="file" accept="image/*"/>
                    </div>

                    <div class="form-row">
                      <div class="avatar-box">
                        <img id="avatar-preview" style="display:none;max-width:120px;border-radius:8px;"/>
                      </div>
                    </div>

                    <div class="form-row">
                      <label for="languages">Lingue</label>
                      <input id="languages" name="languages" type="text"/>
                    </div>
                  </div>

                  <div class="form-row">
                    <label for="socials">Social</label>
                    <textarea id="socials" name="socials"></textarea>
                  </div>

                  <div class="form-row">
                    <label for="interests">Interessi</label>
                    <input id="interests" name="interests" type="text"/>
                  </div>

                  <div class="form-row">
                    <label for="bio">Bio</label>
                    <textarea id="bio" name="bio" rows="4"></textarea>
                  </div>

                  <div class="form-actions">
                    <button type="submit" class="btn" id="saveBasicBtn">Salva profilo</button>
                  </div>
                </form>
              </section>

              <!-- CARD: Privacy DM -->
              <section class="event-card" id="card-privacy">
                <h3>Messaggi diretti</h3>

                <form id="privacyForm" class="form">
                  <div class="grid-2">
                    <div class="form-row">
                      <label>
                        <input type="checkbox" id="optInDM"/>
                        Acconsento a ricevere messaggi diretti
                      </label>
                    </div>

                    <div class="form-row">
                      <label for="dmsFrom">Chi pu√≤ scrivermi</label>
                      <select id="dmsFrom" name="dmsFrom">
                        <option value="everyone">Tutti</option>
                        <option value="followers">Solo chi mi segue</option>
                        <option value="nobody">Nessuno</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-actions">
                    <button type="submit" class="btn" id="savePrivacyBtn">Salva privacy</button>
                  </div>
                </form>
              </section>

              <div class="form-actions" style="margin-top:1rem;">
                <button type="button" class="btn btn-secondary" id="btnCancelEdit">Annulla</button>
              </div>
            </section>

          </div>
        </section>
<!-- =========================
             BOTTOMNAV (UI v2)
             ========================= -->
        <nav class="gw-bottomnav">
          <a class="gw-navitem" href="partecipante-mappa.html" title="Mappa" aria-label="Mappa"><span>üó∫Ô∏è</span></a>
          <a class="gw-navitem" href="partecipante-seguiti-eventi.html" title="Eventi seguiti" aria-label="Eventi seguiti"><span>üß≠</span></a>

          <a class="gw-navitem gw-navitem--home" href="partecipante.html" title="Home" aria-label="Home">
            <span>‚åÇ</span>
          </a>

          <a class="gw-navitem" href="partecipante-seguiti-utenti.html" title="Utenti seguiti" aria-label="Utenti seguiti"><span>üë•</span></a>
          <a class="gw-navitem is-active" href="profile.html" title="Profilo" aria-label="Profilo"><span>‚ò∫</span></a>
        </nav>

        <footer class="app-footer">¬© GoGoWorld.life</footer>
      </main>

      <!-- =========================
           SCRIPTS
           ========================= -->
      <script type="module">
        import { initSharedTopbarUI } from "./js/shared-ui.js";
        initSharedTopbarUI();
      </script>

      <script type="module" src="js/profile.js"></script>
      <script type="module" src="js/notifications.js"></script>

    </div>
  </div>
</body>

</html>
