<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GoGoWorld.life â€“ Dettaglio Evento</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="robots" content="noindex" />
 
</head>
<body>
  <main class="container event-detail">
    <header class="app-header">
      <h1 id="eventTitle">Evento</h1>
    </header>
<nav class="toolbar" id="eventActions" style="display:flex; gap:.5rem; margin:.5rem 0;">
  <a id="btnChatEvento" class="btn" href="#">ğŸ’¬ Apri chat evento</a>
  <a id="btnDMOrganizzatore" class="btn btn-secondary" href="#">âœ‰ï¸ Scrivi allâ€™organizzatore</a>
</nav>
<!-- Unlock per eventi privati -->
<div id="unlockBox" class="unlock" style="display:none; margin:.75rem 0;">
  <label for="unlockCode" class="sr-only">Codice evento</label>
  <input id="unlockCode" type="password" maxlength="64"
         placeholder="Inserisci il codice evento" class="input">
  <button id="btnUnlock" class="btn">Sblocca</button>
  <p id="unlockHelp" class="help" style="margin:6px 0 0; font-size:.9em;">
    Richiesto solo per eventi privati.
  </p>
</div>

    <section id="eventDetails" class="event-details">
      <!-- PATCH: contenitori semantici per i nuovi campi -->
      <div id="eventMeta"></div> <!-- visibilitÃ , lingua, target -->
      <div id="eventSchedule"></div> <!-- dateStart / dateEnd -->
      <div id="eventLocation"></div> <!-- venueName, street, city, province, region, country, lat/lon -->
      <div id="eventPricing"></div> <!-- isFree, price, currency -->
      <div id="eventTaxonomy"></div> <!-- category, subcategory, tags -->
      <div id="eventMedia"></div> <!-- coverImage, images -->
    </section>
<!-- PATCH: Recensioni -->
    <section id="eventReviews" class="event-reviews">
      <h2>Recensioni</h2>

      <div id="reviewsList" class="reviews-list">
        <!-- elenco recensioni approvate -->
      </div>

      <form id="reviewForm" class="review-form">
        <label for="reviewRating">Valutazione</label>
        <select id="reviewRating">
          <option value="">â€“</option>
          <option value="1">â˜…â˜†â˜†â˜†â˜†</option>
          <option value="2">â˜…â˜…â˜†â˜†â˜†</option>
          <option value="3">â˜…â˜…â˜…â˜†â˜†</option>
          <option value="4">â˜…â˜…â˜…â˜…â˜†</option>
          <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
        </select>

        <label for="reviewComment">Commento (opzionale)</label>
        <textarea id="reviewComment" rows="4" placeholder="Scrivi la tua esperienza..."></textarea>

        <button type="submit" class="btn btn-primary">Invia recensione</button>
        <p id="reviewHint" class="hint"></p>
      </form>
    </section>

    <nav class="event-actions">
      <button id="btnBackToList" class="btn">Torna alla lista</button>
      <button id="btnToggleParticipation" class="btn btn-primary"></button>
    </nav>

    <footer class="app-footer">
      <small>Â© GoGoWorld.life</small>
    </footer>
  </main>

  <script type="module" src="js/evento.js"></script>
  <script>
    // Listener globale per retry API (503/502/504)
    window.addEventListener("api:status", (e) => {
      const { phase, attempt, status } = e.detail || {};
      if (phase === "retry") {
        try {
          showAlert(`â³ Server in riattivazioneâ€¦ (tentativo ${attempt})`, "info", { autoHideMs: 1500 });
        } catch {
          console.info("Server in riattivazioneâ€¦ tentativo", attempt, "status", status);
        }
      }
    });
  </script>

</body>
</html>










