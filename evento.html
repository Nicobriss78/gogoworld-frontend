<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GoGoWorld.life â€“ Dettaglio Evento</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="/css/areas/public.css" />
  <meta name="robots" content="noindex" />
 
</head>
<body>
  <main class="container event-detail">
<header class="app-header">
      <h1 id="eventTitle">Evento</h1>
      <span id="badgePrivate" class="gw-pill u-ml-05 is-hidden">ğŸ”’ Privato</span>

    </header>
<nav class="toolbar" id="eventActions">
 <a id="btnChatEvento" class="btn is-hidden" href="#">
ğŸ’¬ Apri chat evento</a>
  <a id="btnDMOrganizzatore" class="btn btn-secondary" href="#">âœ‰ï¸ Scrivi allâ€™organizzatore</a>
</nav>
<!-- ===================================================== -->
    <!-- Access Management + Banner (solo organizer owner / admin) -->
    <!-- ===================================================== -->
    <section id="eventMgmt" class="event-details is-hidden u-mt-075">
      <div class="gw-panel">
        <h2>Gestione evento (Owner/Admin)</h2>

        <!-- Accessi -->
        <div class="u-mt-05">
          <h3>Accessi evento</h3>

            <div class="u-flex u-gap-05 u-center u-wrap">
            <input id="mgmtInviteEmail" class="mgmt-input" type="email" placeholder="Email utente da invitare" />

            <button id="mgmtInviteBtn" class="btn" type="button">â• Invita</button>
          </div>

           <div class="u-grid u-grid-gap-05 u-mt-075">
            <div>
             <div class="mgmt-title">Autorizzati</div>
              <div id="mgmtParticipantsList" class="mgmt-list"></div>
            </div>

              <div class="u-mt-025">
              <div class="mgmt-title">Esclusi (ban)</div>
              <div id="mgmtRevokedList" class="mgmt-list"></div>
            </div>
          </div>
        </div>

        <!-- Banner -->
          <div class="u-mt-1">
           <h3 class="mgmt-h3">Banner evento</h3>
            <div class="u-flex u-gap-05 u-center u-wrap">
            <input id="mgmtBannerUrl" class="mgmt-input" type="url" placeholder="URL banner (coverImage)" />
            <button id="mgmtBannerSaveBtn" class="btn btn-secondary" type="button">ğŸ’¾ Salva banner</button>
          </div>
           <div id="mgmtBannerHint" class="muted u-mt-035">
            (Il banner usa il campo coverImage dellâ€™evento)
          </div>
        </div>
      </div>
    </section>
    <section id="eventDetails" class="event-details">
      <!-- PATCH: contenitori semantici per i nuovi campi -->
      <div id="eventMeta"></div> <!-- visibilitÃ , lingua, target -->
      <div id="eventSchedule"></div> <!-- dateStart / dateEnd -->
      <div id="eventLocation"></div> <!-- venueName, street, city, province, region, country, lat/lon -->
      <div id="eventPricing"></div> <!-- isFree, price, currency -->
      <div id="eventTaxonomy"></div> <!-- category, subcategory, tags -->
      <div id="eventMedia"></div> <!-- coverImage, images -->
    </section>
<!-- PATCH: Recensioni -->
    <section id="eventReviews" class="event-reviews">
      <h2>Recensioni</h2>

      <div id="reviewsList" class="reviews-list">
        <!-- elenco recensioni approvate -->
      </div>

      <form id="reviewForm" class="review-form">
        <label for="reviewRating">Valutazione</label>
        <select id="reviewRating">
          <option value="">â€“</option>
          <option value="1">â˜…â˜†â˜†â˜†â˜†</option>
          <option value="2">â˜…â˜…â˜†â˜†â˜†</option>
          <option value="3">â˜…â˜…â˜…â˜†â˜†</option>
          <option value="4">â˜…â˜…â˜…â˜…â˜†</option>
          <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
        </select>

        <label for="reviewComment">Commento (opzionale)</label>
        <textarea id="reviewComment" rows="4" placeholder="Scrivi la tua esperienza..."></textarea>

        <button type="submit" class="btn btn-primary">Invia recensione</button>
        <p id="reviewHint" class="hint"></p>
      </form>
    </section>

    <nav class="event-actions">
      <button id="btnBackToList" class="btn">Torna alla lista</button>
      <button id="btnToggleParticipation" class="btn btn-primary"></button>
    </nav>

    <footer class="app-footer">
      <small>Â© GoGoWorld.life</small>
    </footer>
  </main>

  <script type="module" src="js/evento.js"></script>
  <script>
    // Listener globale per retry API (503/502/504)
    window.addEventListener("api:status", (e) => {
      const { phase, attempt, status } = e.detail || {};
      if (phase === "retry") {
        try {
          showAlert(`â³ Server in riattivazioneâ€¦ (tentativo ${attempt})`, "info", { autoHideMs: 1500 });
        } catch {
          console.info("Server in riattivazioneâ€¦ tentativo", attempt, "status", status);
        }
      }
    });
  </script>

</body>
</html>

















