<!DOCTYPE html>
<html lang="it">
<head>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GoGoWorld.life â€“ Area Partecipante</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <meta name="robots" content="noindex" />
  
</head>
<body>
  <main class="container participant">
<header class="gw-topbar">
  <!-- Riga 1: saluto + logo -->
  <div class="gw-topbar-row gw-topbar-row--title">
    <div class="gw-greeting">
      <div class="gw-hello">Ciao <span id="gwUserName">ğŸ‘¤</span></div>
      <div class="gw-status" id="gwUserStatus">Partecipante</div>
    </div>

    <div class="gw-brand">
      <!-- TODO: metteremo il tuo logo reale -->
      <span class="gw-brandtext">GoGoWorld.life</span>
    </div>
  </div>

  <!-- Riga 2: azioni -->
  <div class="gw-topbar-row gw-topbar-row--actions">
    <a class="gw-iconbtn" href="pages/cerca-utenti.html" title="Cerca" aria-label="Cerca">
      <span class="gw-ico">ğŸ”</span>
    </a>

<button class="gw-iconbtn" id="btnGeo" title="Posizione" aria-label="Posizione">
      <span class="gw-ico">ğŸ“</span>
    </button>

    <a class="gw-iconbtn" href="messages.html" title="Messaggi" aria-label="Messaggi">
      <span class="gw-ico">âœ‰ï¸</span>
      <span id="messagesBadge" class="gw-badge" style="display:none">0</span>
    </a>

<button class="gw-iconbtn" id="btnNotifications" title="Notifiche" aria-label="Notifiche">
  <span class="gw-ico">ğŸ””</span>
  <span id="notiBadge" class="gw-badge" style="display:none">0</span>
</button>


    <button class="gw-iconbtn" id="btnHamburger" title="Menu" aria-label="Menu">
      <span class="gw-ico">â‰¡</span>
    </button>
  </div>

  <!-- Menu hamburger -->
  <div id="gwMenu" class="gw-menu" style="display:none">
    <a href="pages/cerca-utenti.html">Cerca utente</a>
    <a href="#" id="btnPrivateEvents">Eventi privati</a>
    <a href="#" id="btnGuide">Guida partecipante</a>
    <a href="#" id="btnSwitchRole">Cambia ruolo</a>
    <a href="#" id="btnLogout" class="danger">Logout</a>
  </div>
</header>
<!-- HOME (tra topbar e bottom bar) -->
<section class="gw-home">
  <!-- BLOCCO A (50%) -->
  <section class="gw-block">
    <div class="gw-block-head">
      <h2 class="gw-block-title">Eventi generali</h2>
    </div>

    <!-- Banner inline (lo lasciamo vivo) -->
<div id="allEventsList" class="gw-carousel-wrap"></div>
<div class="gw-scrollrail" data-rail-for="allEventsList">
  <div class="gw-scrollthumb"></div>
</div>
  </section>

  <!-- BLOCCO B (50%) -->
  <section class="gw-block">
    <div class="gw-block-head">
      <h2 class="gw-block-title">Eventi a cui partecipo</h2>
    </div>

<div id="myEventsList" class="gw-carousel-wrap"></div>
<div class="gw-scrollrail" data-rail-for="myEventsList">
  <div class="gw-scrollthumb"></div>
</div>
  </section>
</section>
    <section class="legacy" style="display:none">
    <!-- Filtri -->
    <section class="filters">
      <input id="filterTitle" type="text" placeholder="Titolo" />
      <input id="filterCity" type="text" placeholder="CittÃ " />
      <!-- AGGIUNTE -->
      <input id="filterRegion" type="text" placeholder="Regione" />
      <input id="filterDateStart" type="date" placeholder="Data inizio" />
      <input id="filterDateEnd" type="date" placeholder="Data fine" />

      <!-- PATCH: filtri a tendina coerenti con nuovo schema -->
      <select id="filterCategory" title="Categoria">
        <option value="">Categoria</option>
      </select>
      <select id="filterSubcategory" title="Sottocategoria">
        <option value="">Sottocategoria</option>
      </select>
      <select id="filterLanguage" title="Lingua">
        <option value="">Lingua</option>
        <option value="it">Italiano</option>
        <option value="en">Inglese</option>
        <option value="fr">Francese</option>
        <option value="de">Tedesco</option>
        <option value="es">Spagnolo</option>
        <option value="other">Altro</option>
      </select>
      <select id="filterTarget" title="Target">
        <option value="">Target</option>
        <option value="tutti">Tutti</option>
        <option value="famiglie">Famiglie</option>
        <option value="18+">18+</option>
        <option value="professionisti">Professionisti</option>
      </select>
      <select id="filterCountry" title="Paese">
        <option value="">Paese</option>
        <option value="IT">Italia</option>
        <option value="FR">Francia</option>
        <option value="DE">Germania</option>
        <option value="ES">Spagna</option>
        <option value="GB">Regno Unito</option>
        <option value="US">USA</option>
        <option value="other">Altro</option>
      </select>
      <select id="filterRegionSelect" title="Regione (Italia)">
        <option value="">Regione (IT)</option>
      </select>

      <button id="btnApplyFilters" class="btn">Filtra</button>
    </section>
<!-- Banner â€œCompleta profiloâ€ -->
    <section id="profileNag" class="alert info" style="display:none; margin:.5rem 0;"></section>

    <!-- Eventi privati: codice invito + menÃ¹ a tendina -->
    <section id="privateEventsBlock" style="margin:0.5rem 0;">
      <div class="private-code-row">
        <input
          id="inviteCodeInput"
          type="text"
          placeholder="Hai un codice per un evento privato?"
          autocomplete="off"
        />
        <button id="btnApplyInvite" class="btn">Sblocca evento</button>
      </div>

      <button id="togglePrivateList" class="btn btn-secondary private-toggle">
        ğŸ”’ Eventi privati (<span id="privateCount">0</span>)
      </button>

      <ul id="privateEventsList" class="private-events-list" style="display:none;"></ul>
    </section>
    <!-- /Eventi privati -->

    <!-- Mappa eventi -->
    <section id="mapSection">
      <div id="map"></div>
    </section>


        <!-- B2.3 â€” Legenda colori stato evento -->
        <div id="mapLegend" class="map-legend">
          <span class="legend-item">
            <span class="legend-dot legend-dot-ongoing"></span>In corso
          </span>
          <span class="legend-item">
            <span class="legend-dot legend-dot-imminent"></span>Imminente
          </span>
          <span class="legend-item">
            <span class="legend-dot legend-dot-future"></span>In arrivo
          </span>
        </div>

<!-- Container non utilizzato ma lasciato per non rimuovere codice -->
    <section id="eventsList" class="events-list"></section>

    <!-- Sezione: eventi dalle persone che segui -->
    <h2>Eventi delle persone che segui</h2>
    <section id="followingEventsList" class="events-list"></section>
</section>
<nav class="gw-bottomnav">
  <a class="gw-navitem" href="partecipante-mappa.html" title="Mappa"><span>ğŸ—ºï¸</span></a>
  <a class="gw-navitem" href="partecipante-seguiti-eventi.html" title="Eventi seguiti"><span>ğŸ§­</span></a>

  <a class="gw-navitem gw-navitem--home is-active" href="partecipante.html" title="Home">
    <span>âŒ‚</span>
  </a>

  <a class="gw-navitem" href="partecipante-seguiti-utenti.html" title="Utenti seguiti"><span>ğŸ‘¥</span></a>
  <a class="gw-navitem" href="profilo.html" title="Profilo"><span>â˜º</span></a>
</nav>
    <footer class="app-footer">
      GoGoWorld.life â€“ Area Partecipante
    </footer>
  </main>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script type="module" src="js/partecipante.js"></script>
<script>
  // Listener globale per messaggi di stato API (lo teniamo)
  window.addEventListener("api:status", (e) => {
    const { phase, attempt, status } = (e && e.detail) || {};
    if (phase === "retry") {
      try {
        showAlert(`â³ Server in riattivazioneâ€¦ (tentativo ${attempt})`, "info", { autoHideMs: 1500 });
      } catch {}
      console.info("Server in riattivazioneâ€¦ tentativo", attempt, "status", status);
    }
  });
</script>

  <!-- Badge Messaggi/Room -->
<script type="module" src="js/notifications.js"></script>
</body>
</html>


